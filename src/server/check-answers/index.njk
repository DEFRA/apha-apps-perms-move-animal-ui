{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% extends 'layouts/page.njk' %}

{% macro multipleSections(rows) %}

{% set enrichedRows = [] %}
{% for row in rows %}
  {% set domesticAnimals = (enrichedRows, enrichedRows.push({
    key: {
      text: row.key,
      classes: "govuk-!-width-one-half govuk-!-font-weight-regular"
    },
    value: {
      text: row.value
    },
    actions: {
      items: [
        {
          href: row.url,
          text: "Change",
          visuallyHiddenText: question,
          attributes: attributes
        }
      ]
    }
  })) %}
{% endfor %}



{{ govukSummaryList({
  rows: enrichedRows
}) }}
{% endmacro %}

{% macro section(key, value, url, attributes) %}
{{ govukSummaryList({
  rows: [
    {
      key: {
        text: key,
        classes: "govuk-!-width-one-half govuk-!-font-weight-regular"
      },
      value: {
        text: value
      },
      actions: {
        items: [
          {
            href: url,
            text: "Change",
            visuallyHiddenText: question,
            attributes: attributes
          }
        ]
      }
    }
  ]
}) }}
{% endmacro %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="govuk-body" data-testid="app-page-body">
        <div class="govuk-!-margin-top-0 govuk-!-margin-bottom-8">
          <h1 class="govuk-heading-l">
              {{ heading }}
          </h1>

          <h2 class="govuk-heading-m">Movement origin</h2>
          {{ section("Are you moving the cattle on or off your farm or premises?", "", "/origin/summary") }}

          <h2 class="govuk-heading-m">Movement destination</h2>
          {{ section("Where are the animals going to?", "") }}

          <h2 class="govuk-heading-m">Tests</h2>
          {{ section("Tests on the animals you plan to move", "I confirm these test conditions have been met", "") }}

          <h2 class="govuk-heading-m">Receiving the licence</h2>
          {{ multipleSections([{
            key: "How would you like this licence sent to you?", 
            value: "", 
            url: ""
          }, {
            key: "What address would you like the licence sent to?", 
            value: "", 
            url: ""
          }])}}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
